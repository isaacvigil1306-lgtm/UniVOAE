<div class="contenedor">
  <h1>GestiÃ³n de Actividades</h1>
  <button class="btn abrir-modal" (click)="abrirModal()">Crear Actividad</button>

  <!-- Tabla de actividades -->
  <div class="tabla-contenedor">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Lugar</th>
          <th>Horas</th>
          <th>Cupo</th>
          <th>Pago</th>
          <th>Imagen</th>
          <th>Estado</th>
          
          <th>Acciones</th>
          <th>Estudiantes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let act of actividades">
          <td>{{ act.nombre }}</td>
          <td>{{ act.fecha }}</td>
          <td>{{ act.hora }}</td>
          <td>{{ act.lugar }}</td>
          <td>{{ act.horas }}</td>
          <td>{{ act.cupo }}</td>
          <td>{{ act.pago ? 'SÃ­' : 'No' }}</td>
          <td>
            <img *ngIf="act.imagen" [src]="act.imagen" alt="Imagen actividad" width="60" />
            <span *ngIf="!act.imagen">â€”</span>
          </td>
          <td>
            <button class="btn" [ngClass]="act.estado ? 'activo' : 'inactivo'" 
                    (click)="toggleEstado(act)">
              {{ act.estado ? 'Activo' : 'Inactivo' }}
            </button>
          </td>
          
          <td>
            <button class="btn editar" (click)="abrirModal(act)">Editar</button>
          </td>
          <td>
            <button class="btn ver" 
                    (click)="act.id && verEstudiantes(act.id)">
              ðŸ‘¥ Ver Estudiantes
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal Crear/Editar Actividad -->
  <div class="modal" *ngIf="modalAbierto">
    <div class="modal-contenido">
      <h2>{{ modoEdicion ? 'Editar Actividad' : 'Crear Actividad' }}</h2>
      <form #form="ngForm" (ngSubmit)="crearActividad(form)">
        <!-- Campos de actividad (igual que tu HTML actual) -->
        <div class="grupo">
          <label>Nombre</label>
          <input type="text" [(ngModel)]="nuevaActividad.nombre" name="nombre" required />
        </div>

        <div class="grupo doble">
          <div>
            <label>Fecha</label>
            <input type="date" [(ngModel)]="nuevaActividad.fecha" name="fecha" required />
          </div>
          <div>
            <label>Hora</label>
            <input type="time" [(ngModel)]="nuevaActividad.hora" name="hora" required />
          </div>
        </div>

        <div class="grupo">
          <label>Lugar</label>
          <input type="text" [(ngModel)]="nuevaActividad.lugar" name="lugar" required />
        </div>

        <div class="grupo doble">
          <div>
            <label>Cantidad de horas</label>
            <input type="number" [(ngModel)]="nuevaActividad.horas" name="horas" min="0" required />
          </div>
          <div>
            <label>Cupo mÃ¡ximo</label>
            <input type="number" [(ngModel)]="nuevaActividad.cupo" name="cupo" min="0" required />
          </div>
        </div>

        <div class="grupo">
          <label>
            <input type="checkbox" [(ngModel)]="nuevaActividad.pago" name="pago" />
            Â¿Requiere pago?
          </label>

          <div *ngIf="nuevaActividad.pago" class="pago-opciones">
            <label for="correoPago">Correo electrÃ³nico de pagos*</label>
            <input type="email" id="correoPago" [(ngModel)]="nuevaActividad.correoPago" name="correoPago" required />

            <label for="precio">Precio*</label>
            <input type="number" id="precio" [(ngModel)]="nuevaActividad.precio" name="precio" required />

            <label for="banco">Banco*</label>
            <input type="text" id="banco" [(ngModel)]="nuevaActividad.banco" name="banco" required />

            <label for="cuenta">NÃºmero de cuenta*</label>
            <input type="text" id="cuenta" [(ngModel)]="nuevaActividad.numeroCuenta" name="numeroCuenta" required />
          </div>
        </div>

        <div class="grupo">
          <label>DescripciÃ³n</label>
          <textarea [(ngModel)]="nuevaActividad.descripcion" name="descripcion"></textarea>
        </div>

        <div class="grupo">
          <label>URL de Imagen</label>
          <input type="text" [(ngModel)]="nuevaActividad.imagen" name="imagen" placeholder="https://ejemplo.com/imagen.jpg" />
        </div>

        <div class="grupo" *ngIf="nuevaActividad.imagen">
          <label>Vista previa</label>
          <img [src]="nuevaActividad.imagen" alt="Vista previa" width="120" />
        </div>

        <button type="submit" class="btn submit">
          {{ modoEdicion ? 'Guardar cambios' : 'Crear actividad' }}
        </button>
        <button type="button" class="btn cerrar" (click)="cerrarModal()">Cancelar</button>
      </form>
    </div>
  </div>

<!-- Modal estudiantes -->
<div class="modal" *ngIf="mostrarEstudiantes">
  <div class="modal-contenido">
    <!-- BotÃ³n de cerrar con X -->
    <button class="cerrar-x" (click)="cerrarEstudiantes()">Ã—</button>

    <h2>Estudiantes inscritos</h2>
    <table>
      <thead>
        <tr>
          <th>NÃºmero de cuenta</th>
          <th>Nombre</th>
          <th>Correo</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let est of estudiantes">
          <td>{{ est.identidad }}</td>
          <td>{{ est.nombre }}</td>
          <td>{{ est.correo }}</td>
          <td>
            <span [ngClass]="{
              'pendiente': est.estadoInscripcion === 'pendiente',
              'aceptado': est.estadoInscripcion === 'aceptado',
              'falta-pago': est.estadoInscripcion === 'falta-pago',
              'rechazado': est.estadoInscripcion === 'rechazado'
            }">
              {{ est.estadoInscripcion || 'pendiente' }}
            </span>
          </td>
          <td>
            <select [(ngModel)]="est.estadoInscripcion" (change)="cambiarEstado(est, est.estadoInscripcion)">
              <option value="aceptado">Aceptar</option>
              <option value="falta-pago">Falta realizar el pago</option>
              <option value="pendiente">Pendiente</option>
              <option value="rechazado">Rechazar</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
