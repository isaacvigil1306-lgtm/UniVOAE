<div class="contenedor">
  <h1>GestiÃ³n de Actividades</h1>
  <button class="btn abrir-modal" (click)="abrirModal()">Crear Actividad</button>

  <!-- Tabla de actividades -->
  <div class="tabla-contenedor">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Lugar</th>
          <th>Horas</th>
          <th>Cupo</th>
          <th>Pago</th>
          <th>Imagen</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let act of actividades">
          <td>{{ act.nombre }}</td>
          <td>{{ act.fecha }}</td>
          <td>{{ act.hora }}</td>
          <td>{{ act.lugar }}</td>
          <td>{{ act.horas }}</td>
          <td>{{ act.cupo }}</td>
          <td>{{ act.pago ? 'SÃ­' : 'No' }}</td>
          <td>
            <img *ngIf="act.imagen" [src]="act.imagen" alt="Imagen actividad" width="60" />
            <span *ngIf="!act.imagen">â€”</span>
          </td>
          <td>
            <button class="btn editar" (click)="abrirModal(act)">Editar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div class="modal" *ngIf="modalAbierto">
    <div class="modal-contenido">
      <h2>{{ modoEdicion ? 'Editar Actividad' : 'Crear Actividad' }}</h2>
      <form #form="ngForm" (ngSubmit)="crearActividad(form)">
        <div class="grupo">
          <label>Nombre</label>
          <input type="text" [(ngModel)]="nuevaActividad.nombre" name="nombre" required />
        </div>

        <div class="grupo doble">
          <div>
            <label>Fecha</label>
            <input type="date" [(ngModel)]="nuevaActividad.fecha" name="fecha" required />
          </div>
          <div>
            <label>Hora</label>
            <input type="time" [(ngModel)]="nuevaActividad.hora" name="hora" required />
          </div>
        </div>

        <div class="grupo">
          <label>Lugar</label>
          <input type="text" [(ngModel)]="nuevaActividad.lugar" name="lugar" required />
        </div>

        <div class="grupo doble">
          <div>
            <label>Cantidad de horas</label>
            <input type="number" [(ngModel)]="nuevaActividad.horas" name="horas" min="0" required />
          </div>
          <div>
            <label>Cupo mÃ¡ximo</label>
            <input type="number" [(ngModel)]="nuevaActividad.cupo" name="cupo" min="0" required />
          </div>
        </div>

        <div class="grupo">
          <label>Â¿Requiere pago?</label>
          <select [(ngModel)]="nuevaActividad.pago" name="pago" required>
            <option [value]="false">No</option>
            <option [value]="true">SÃ­</option>
          </select>
        </div>

        <div class="grupo">
          <label>DescripciÃ³n</label>
          <textarea [(ngModel)]="nuevaActividad.descripcion" name="descripcion"></textarea>
        </div>

        <!-- ðŸ“Œ Nuevo campo de imagen -->
        <div class="grupo">
          <label>URL de Imagen</label>
          <input type="text" [(ngModel)]="nuevaActividad.imagen" name="imagen" placeholder="https://ejemplo.com/imagen.jpg" />
        </div>

        <!-- Vista previa -->
        <div class="grupo" *ngIf="nuevaActividad.imagen">
          <label>Vista previa</label>
          <img [src]="nuevaActividad.imagen" alt="Vista previa" width="120" />
        </div>

        <button type="submit" class="btn submit">
          {{ modoEdicion ? 'Guardar cambios' : 'Crear actividad' }}
        </button>
        <button type="button" class="btn cerrar" (click)="cerrarModal()">Cancelar</button>
      </form>
    </div>
  </div>
</div>
